{
    "Id": "AspNetAppElasticBeanstalkLinux",
    "Name": "ASP.NET Core App to Elastic Beanstalk Linux",
    "DeploymentType": "CdkProject",
    "CdkProjectTemplate": "../CdkTemplates/AspNetAppElasticBeanstalkLinux",
    "CdkProjectTemplateId": "netdeploy.AspNetAppElasticBeanstalkLinux",
    "Description": "ASP.NET Core applications can be deployed Elastic Beanstalk and have the AWS resources automatically provisioned and managed by the service.",
    "TargetService": "AWS Elastic Beanstalk",

    "RecommendationRules": {
        "RequiredRules": [
            { "SdkType": "Microsoft.NET.Sdk.Web" },
            {
                "MSProperty": {
                    "Name": "TargetFramework",
                    "AllowedValues": [ "netcoreapp2.1", "netcoreapp3.1", "net5.0" ]
                }
            }
        ],
        "NegativeRules": [
            { "MSPropertyExists": "AWSProjectType" }
        ],

        "Priority": 100
    },

    "DeploymentBundle": "DotnetPublishZipFile",

    "OptionSettings": [
        {
            "Id": "ApplicationName",
            "Name": "Application Name",
            "Description": "The Elastic Beanstalk application name.",
            "Type": "String",
            "TypeHint": "BeanstalkApplication",
            "DefaultValue": "{ProjectName}",
            "AdvancedSetting": false,
            "Updatable": false
        },
        {
            "Id": "EnvironmentName",
            "ParentSettingId": "ApplicationName",
            "Name": "Environment Name",
            "Description": "The Elastic Beanstalk environment name.",
            "Type": "String",
            "TypeHint": "BeanstalkEnvironment",
            "DefaultValue": "{ProjectName}-dev",
            "AdvancedSetting": false,
            "Updatable": false
        },
        {
            "Id": "InstanceType",
            "Name": "EC2 Instance Type",
            "Description": "The EC2 instance type used for the EC2 instances created for the environment.",
            "Type": "String",
            "TypeHint": "InstanceType",
            "DefaultValue": "t2.micro",
            "AdvancedSetting": true,
            "Updatable": true
        },
        {
            "Id": "EnvironmentType",
            "Name": "Environment Type",
            "Description": "The type of environment to create for example a single instance for development or load balanced for production",
            "Type": "String",
            "DefaultValue": "Single Instance",
            "AllowedValues": [
                "Single Instance",
                "Load Balanced"
            ],
            "ValueMapping": {
                "Single Instance": "SingleInstance",
                "Load Balanced": "LoadBalanced"
            },
            "AdvancedSetting": false,
            "Updatable": true
        },
        {
            "Id": "LoadBalancerType",
            "Name": "Load Balancer Type",
            "Description": "The type of load balancer for your environment.",
            "Type": "String",
            "DefaultValue": "Application",
            "AllowedValues": [
                "Application",
                "Classic",
                "Network"
            ],
            "ValueMapping": {
                "Application": "application",
                "Classic": "classic",
                "Network": "network"
            },
            "DependsOn": [
                {
                    "Id": "EnvironmentType",
                    "Value": "LoadBalanced"
                }
            ],
            "AdvancedSetting": true,
            "Updatable": true
        },
        {
            "Id": "ApplicationIAMRole",
            "Name": "Application IAM Role",
            "Description": "The Identity and Access Management Role that provides AWS credentials to the application to access AWS services",
            "Type": "String",
            "TypeHint": "IAMRole",
            "DefaultValue": "aws-elasticbeanstalk-role",
            "AdvancedSetting": false,
            "Updatable": false,
            "MinimumPermissions": "...",
            "AssumeRolePolicy": "..."
        },
        {
            "Id": "DotnetBuildConfiguration",
            "Name": "Dotnet Build Configuration",
            "Description": "The build configuration to use for the dotnet build",
            "Type": "String",
            "DefaultValue": "Release",
            "AdvancedSetting": true,
            "Updatable": true
        }
    ]
}
